## 課題2

### 課題2-1

シャリの有無について

1. わさび抜きのようにカラムを追加する

【メリット】
- 早い

【デメリット】
- 拡張性がない
  - 他のオプションが増えていくたびに、order_detailsにカラムを追加する必要がある

2. オプションテーブルのようなものを作成する

【メリット】
- 拡張性と保守性が上がる

【デメリット】
- 手間がかかる

### 課題2-2

menu_item_compositionを作成
「どのセット商品に、どの単品が、何個含まれるか」を表すテーブルです。

| フィールド           | 型        | 説明                                                   |
|----------------------|----------|---------------------------------------------------------|
| composition_id       | INT (PK) | 連番（セット構成テーブルを一意に識別するID）            |
| menu_item_id         | INT (FK) | “セット”となるメニュー商品のID                          |
| item_id              | INT (FK) | “セットに含まれる単品”のメニュー商品ID                  |
| item_quantity        | INT      | 1セット中に含まれる単品ネタの数量                       |
| created_at           | DATETIME | 登録日時                                                |
| updated_at           | DATETIME | 更新日時                                                |

```mermaid
erDiagram
    CUSTOMERS {
      INT customer_id PK "顧客ID"
      VARCHAR name "顧客名"
      VARCHAR phone_number "電話番号"
      DATETIME created_at "登録日時"
      DATETIME updated_at "更新日時"
    }
    ORDERS {
      INT order_id PK "注文ID"
      INT customer_id FK "顧客ID（外部キー）"
      INT total_amount "合計金額"
      VARCHAR payment_status "支払いステータス"
      DATETIME order_date "注文日時"
      DATETIME created_at "登録日時"
      DATETIME updated_at "更新日時"
    }
    ORDER_ITEMS {
      INT order_item_id PK "注文詳細ID"
      INT order_id FK "注文ID（外部キー）"
      INT menu_item_id FK "メニュー商品ID（外部キー）"
      INT quantity "個数/皿数"
      INT unit_price "商品単価"
      DATETIME created_at "登録日時"
      DATETIME updated_at "更新日時"
    }
    MENU_CATEGORIES {
      INT category_id PK "カテゴリID"
      VARCHAR category_name "カテゴリ名"
      DATETIME created_at "登録日時"
      DATETIME updated_at "更新日時"
    }
    MENU_ITEMS {
      INT menu_item_id PK "メニュー商品ID"
      INT category_id FK "カテゴリID（外部キー）"
      VARCHAR item_name "商品名"
      TEXT description "説明・備考"
      INT price "基本単価"
      DATETIME created_at "登録日時"
      DATETIME updated_at "更新日時"
    }
    MENU_ITEM_COMPOSITION {
      INT composition_id PK "セット構成ID"
      INT menu_item_id FK "セットとなるメニュー商品ID"
      INT order_item_id FK "セットに含まれる単品のメニュー商品ID"
      INT order_item_quantity "1セット中の単品の数量"
      DATETIME created_at "登録日時"
      DATETIME updated_at "更新日時"
    }
    
    CUSTOMERS ||--o{ ORDERS : "places"
    ORDERS ||--o{ ORDER_ITEMS : "contains"
    MENU_CATEGORIES ||--o{ MENU_ITEMS : "categorizes"
    MENU_ITEMS ||--o{ ORDER_ITEMS : "ordered in"
    MENU_ITEMS ||--o{ MENU_ITEM_COMPOSITION : "defines set"
    MENU_ITEM_COMPOSITION }o--|| MENU_ITEMS : "includes"
```

### 課題2-3

クーポンなどの割引があった場合
