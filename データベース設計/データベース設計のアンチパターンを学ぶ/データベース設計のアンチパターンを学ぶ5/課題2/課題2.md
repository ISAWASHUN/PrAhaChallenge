### 修正したDB設計

### 1. event_typeごとに変更を持たせるパターン

テーブルが2つになり、拡張されても正規化を保つことができている。
ただ、event_typeが複数の値を持つので、event_typeごとにテーブルを分割した方がいいと思ったので、案2として、以下に書いている。

```mermaid
erDiagram
  NEW_CUSTOMER {
    varchar id PK
    varchar name
  }

  SALES_EVENT {
    int id PK
    varchar new_customer_id FK "参照: NEW_CUSTOMER.id"
    varchar event_type "例: call, meeting, closed, reopened, canceledなど"
    date event_date
    varchar note "イベントの詳細メモ"
  }

  NEW_CUSTOMER ||--o{ SALES_EVENT : "has"
```

###  2. event_typeごとにテーブルを作成するパターン

下記の構成の方が、例えば、「callのコールの履歴を取得したとき」なのに、効率的にクエリを作成できる。
ただ、その各種イベントを一気に取得する際にJOINが多数生じるのでトレードオフな気がする。


```mermaid
erDiagram
    NEW_CUSTOMER {
      varchar id PK
      varchar name
    }

    CALL_EVENT {
      int id PK
      varchar new_customer_id FK "参照: NEW_CUSTOMER.id"
      date call_date
      varchar note "電話時のメモ"
    }

    MEETING_EVENT {
      int id PK
      varchar new_customer_id FK "参照: NEW_CUSTOMER.id"
      date meeting_date
      varchar note "面談時のメモ"
    }

    CLOSED_EVENT {
      int id PK
      varchar new_customer_id FK "参照: NEW_CUSTOMER.id"
      date closed_date
      varchar note "成約時の詳細"
    }

    NEW_CUSTOMER ||--o{ CALL_EVENT : "has"
    NEW_CUSTOMER ||--o{ MEETING_EVENT : "has"
    NEW_CUSTOMER ||--o{ CLOSED_EVENT : "has"
```


1と2については議論したいところです。
