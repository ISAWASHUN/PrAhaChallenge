## 解決策

新たに以下のテーブルを作成する

- student_status
  - ステータス管理
- student_status_history
  - 過去のステータス履歴

```mermaid
erDiagram
    STUDENT {
      varchar id PK
      int current_status_id FK
      string name
      datetime created_at
      datetime updated_at
    }
    STUDENT_STATUS {
      int status_id PK
      string status_name
    }
    STUDENT_STATUS_HISTORY {
      int history_id PK
      varchar student_id FK
      int status_id FK
      datetime changed_at
      string reason
    }
    
    STUDENT_STATUS ||--o{ STUDENT : ""
    STUDENT ||--o{ STUDENT_STATUS_HISTORY : ""
    STUDENT_STATUS ||--o{ STUDENT_STATUS_HISTORY : ""
```

最初はdelete_usersテーブルだけを作成していたが、上記のように変更した。

理由は、以下です。

- データ分析などで退会理由などが必要な場合がある
- 再入会したいなどにdelte_usersだけなら、元の生徒情報とその関連データが完全に切り離されていると、復元処理や過去データの参照が困難になる
