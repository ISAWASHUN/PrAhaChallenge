### RLSとPoolを使ったマルチテナントの構築

Poolとは？
> すべてのテナントで同じスキーマを使う手法です

一つのDBでテナントIDなので識別する必要がある

if文なので条件分岐を行ってしまうとバグの可能性で、他のテナントの情報を開示してしまう可能性がある。
なので、RLSを使う

RLSとは？
> RLSは、テーブルの各行に対してアクセス制御ポリシーを設定する仕組みです

RLSの制限について
- テーブル単位はロール
- 列単位はView
- 行単位はRLS

課題1でも書いたが、以下のようにRLSを作成する
```
-- テーブルに対してRLSを有効化
ALTER TABLE employees ENABLE ROW LEVEL SECURITY;

-- テナント情報を利用したポリシーを設定
CREATE POLICY tenant_policy ON employees
  USING (tenant_id = current_setting('app.current_tenant')::text);
```

【参考資料】
https://soudai.hatenablog.com/entry/2022/11/11/110825
https://speakerdeck.com/soudai/utilizing-rsl-in-multi-tenancy
