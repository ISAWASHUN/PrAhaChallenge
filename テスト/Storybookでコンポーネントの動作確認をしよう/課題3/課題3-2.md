# テストを書きやすくするための理想的な実装

現在の実装には以下の問題点があります：

1. **可読性の低さ**: `squares[0]`が「左上のマス」であることが明示的でない
2. **保守性の低さ**: コンポーネント内部の実装変更がテストに影響する

## 理想的な実装

### データ属性（data-testid）を活用した実装

Squareコンポーネントに位置を示すデータ属性を追加する：

```tsx
function Square({ value, onSquareClick, position }: SquareProps & { position: string }) {
  return (
    <button
      className="square" 
      onClick={onSquareClick}
      // 追加
      data-testid={`square-${position}`}
    >
      {value}
    </button>
  );
}
```

Boardコンポーネントでの使用例：

```tsx
// Board.tsxの改善例
<Square
  key={idx}
  value={squares[idx]}
  onSquareClick={() => handleClick(idx)}
  // 追加
  position={`${row}-${col}`}
```

テストコードでの使用例：

```tsx
const topLeft = canvas.getByTestId('square-0-0');
const topCenter = canvas.getByTestId('square-0-1');
await userEvent.click(topLeft);
await userEvent.click(topCenter);
```
